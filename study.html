<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Generation Comparison Study</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container study-container">
        <header class="study-header">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="progress-text">
                    Problem <span id="currentProgress">1</span> of <span id="totalProgress">16</span>
                </div>
            </div>
        </header>

        <main class="study-main">
            <!-- Loading State -->
            <div id="loadingState" class="loading-state">
                <div class="loading-spinner"></div>
                <p id="loadingText">Loading video comparison...</p>
            </div>

            <!-- Study Interface -->
            <div id="studyInterface" class="study-interface" style="display: none;">
                <div class="video-section">
                    <div class="video-info">
                        <div class="prompt-section">
                            <h4>Text Prompt:</h4>
                            <p id="currentPromptText" class="prompt-text">Loading prompt...</p>
                        </div>
                    </div>

                    <div class="video-labels">
                        <span class="video-label">Model A</span>
                        <span class="video-label">Model B</span>
                    </div>
                    <div class="video-container">
                        <video id="comparisonVideo" controls muted preload="auto" width="100%">
                            Your browser does not support the video tag.
                        </video>
                    </div>

                    <div class="video-controls-info">
                        <p><strong>Please watch the video completely before making your choice below.</strong></p>
                        <p>The video shows: Model A | Model B (side by side)</p>
                    </div>
                </div>

                <div class="questions-section">
                    <form id="choiceForm">
                        <div class="questions-container">
                            <p class="questions-instruction">
                                <strong>Please answer all questions below after watching the video completely.</strong>
                                Watch the video multiple times if needed to evaluate different aspects.

                            </p>

                            <div class="question">
                                <h4>1. <strong>[Color Consistency]</strong> Which video maintains more consistent color and exposure throughout, without sudden shifts in brightness, saturation, or color tone?</h4>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="color_consistency" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="color_consistency" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>2. <strong>[Dynamic Motion]</strong> Which video exhibits more dynamic and varied motion, including both subject movement and camera movement?</h4>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="dynamic_motion" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="dynamic_motion" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>3. <strong>[Subject Consistency]</strong> Which video maintains better visual consistency of the main subject throughout its duration? (Consider comparing the beginning and end of each video)</h4>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="subject_consistency" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="subject_consistency" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>4. <strong>[Overall Quality]</strong> Overall, which video appears more realistic, natural, and of higher overall quality?</h4>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="overall_quality" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="overall_quality" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="prevVideo" class="action-button secondary">
                                ‚Üê Previous Video
                            </button>
                            <button type="submit" id="submitChoice" class="action-button primary" disabled>
                                Next Video ‚Üí
                            </button>
                            <button type="button" id="nextVideo" class="action-button secondary">
                                Skip ‚Üí
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Completion State -->
            <div id="completionState" class="completion-state" style="display: none;">
                <h2>‚ö†Ô∏è Manual Submission Required</h2>
                <p>Auto-submission failed. Please copy the following code and send it to the researchers who asked you to survey:</p>
                <div class="results-code-container">
                    <textarea id="resultsCodeFinal" readonly class="results-code"></textarea>
                    <button id="copyResultsFinalBtn" class="copy-button">üìã Copy Code</button>
                </div>
                <p><small>Thank you for participating in our user study!</small></p>
            </div>
        </main>
    </div>

    <!-- Results Modal -->
    <div id="resultsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Your Study Results</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Please copy the following code and send it to the researchers who asked you to survey:</p>
                <div class="results-code-container">
                    <textarea id="resultsCode" readonly class="results-code"></textarea>
                    <button id="copyResultsBtn" class="copy-button">üìã Copy Code</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/study.js"></script>
</body>
</html>