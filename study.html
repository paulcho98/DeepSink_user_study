<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Generation Comparison Study</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container study-container">
        <header class="study-header">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="progress-text">
                    Comparison Set <span id="currentComparisonSet">1</span> of <span id="totalComparisonSets">10</span> |
                    Video <span id="videoNumber">1</span> of <span id="totalVideosInSet">2</span>
                    (<span id="currentProgress">1</span>/<span id="totalProgress">20</span> total)
                </div>
            </div>
        </header>

        <main class="study-main">
            <!-- Loading State -->
            <div id="loadingState" class="loading-state">
                <div class="loading-spinner"></div>
                <p id="loadingText">Loading video comparison...</p>
            </div>

            <!-- Study Interface -->
            <div id="studyInterface" class="study-interface" style="display: none;">
                <div class="video-section">
                    <div class="video-info">
                        <h2><span id="comparisonSetName">Comparison Set 1</span></h2>
                        <div class="prompt-section">
                            <h4>Text Prompt:</h4>
                            <p id="currentPromptText" class="prompt-text">Loading prompt...</p>
                        </div>
                    </div>

                    <div class="video-labels">
                        <span class="video-label">First Frame</span>
                        <span class="video-label">Model A</span>
                        <span class="video-label">Model B</span>
                    </div>
                    <div class="video-container">
                        <video id="comparisonVideo" controls autoplay muted loop preload="metadata" width="100%">
                            Your browser does not support the video tag.
                        </video>
                    </div>

                    <div class="video-controls-info">
                        <p><strong>Please watch the video completely before making your choice below.</strong></p>
                        <p>The video shows: First Frame | Model A | Model B</p>
                    </div>
                </div>

                <div class="questions-section">
                    <form id="choiceForm">
                        <div class="questions-container">
                            <p class="questions-instruction">
                                <strong>Please answer all questions below after watching the video completely.</strong>
                                Watch the video multiple times if needed to evaluate different aspects.
                                <br><br>
                                <strong>ë¹„ë””ì˜¤ë¥¼ ì™„ì „íˆ ì‹œì²­í•œ í›„ ì•„ë˜ ëª¨ë“  ì§ˆë¬¸ì— ë‹µí•´ì£¼ì„¸ìš”.</strong>
                                ë‹¤ì–‘í•œ ì¸¡ë©´ì„ í‰ê°€í•˜ê¸° ìœ„í•´ í•„ìš”ì‹œ ë¹„ë””ì˜¤ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹œì²­í•˜ì„¸ìš”.
                            </p>

                            <div class="question">
                                <h4>1. <strong>[Interaction Accuracy]</strong> Which video more accurately represents the interaction specified in the text prompt (who is interacting with whom and what they are doing)?</h4>
                                <p class="question-korean"><strong>[ìƒí˜¸ì‘ìš© ì •í™•ì„±]</strong> í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ëª…ì‹œëœ ìƒí˜¸ì‘ìš©(ëˆ„ê°€ ëˆ„êµ¬ì™€ ë¬´ì—‡ì„ í•˜ëŠ”ì§€)ì„ ë” ì •í™•í•˜ê²Œ í‘œí˜„í•œ ë¹„ë””ì˜¤ëŠ”?</p>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="interaction_accuracy" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="interaction_accuracy" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>2. <strong>[Semantic Grounding]</strong> Which video more accurately includes the objects indicated in the image prompt as instructed by the text prompt in the interaction (i.e., better grounding)?</h4>
                                <p class="question-korean"><strong>[ê°ì²´ ë°˜ì˜ ì •í™•ë„]</strong> í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ì˜ ì§€ì‹œì— ë”°ë¼ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ì— í‘œì‹œëœ ê°ì²´ë“¤ì„ ìƒí˜¸ì‘ìš©ì— ë” ì •í™•í•˜ê²Œ í¬í•¨í•œ ë¹„ë””ì˜¤ëŠ”? (ì¦‰, ë” ë‚˜ì€ ê¸°ë°˜í™”)</p>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="entity_accuracy" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="entity_accuracy" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>3. <strong>[Semantic Propagation]</strong> Which video is more temporally consistent, without sudden appearances/disappearances (hallucination)?</h4>
                                <p class="question-korean"><strong>[ì˜ë¯¸ì  ì „íŒŒ]</strong> ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì¶œí˜„/ì†Œë©¸(í™˜ê°) ì—†ì´ ì‹œê°„ì ìœ¼ë¡œ ë” ì¼ê´€ì„± ìˆëŠ” ë¹„ë””ì˜¤ëŠ”?</p>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="temporal_consistency" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="temporal_consistency" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>4. <strong>[Semantic Alignment]</strong> Overall, which video shows the interaction more faithfully and naturally according to the text prompt?</h4>
                                <p class="question-korean"><strong>[ì˜ë¯¸ì  ì •ë ¬]</strong> ì „ë°˜ì ìœ¼ë¡œ í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ì— ë”°ë¼ ìƒí˜¸ì‘ìš©ì„ ë” ì¶©ì‹¤í•˜ê³  ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì—¬ì£¼ëŠ” ë¹„ë””ì˜¤ëŠ”?</p>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="prompt_faithfulness" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="prompt_faithfulness" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>

                            <div class="question">
                                <h4>5. <strong>[Overall Quality]</strong> Overall, which video looks more realistic, natural, and of higher overall quality?</h4>
                                <p class="question-korean"><strong>[ì „ë°˜ì  í’ˆì§ˆ]</strong> ì „ë°˜ì ìœ¼ë¡œ ë” í˜„ì‹¤ì ì´ê³  ìì—°ìŠ¤ëŸ¬ìš°ë©° ì „ì²´ì ì¸ í’ˆì§ˆì´ ë†’ì€ ë¹„ë””ì˜¤ëŠ”?</p>
                                <div class="question-options">
                                    <label>
                                        <input type="radio" name="overall_quality" value="A">
                                        Model A
                                    </label>
                                    <label>
                                        <input type="radio" name="overall_quality" value="B">
                                        Model B
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="prevVideo" class="action-button secondary">
                                â† Previous Video
                            </button>
                            <button type="submit" id="submitChoice" class="action-button primary" disabled>
                                Next Video â†’
                            </button>
                            <button type="button" id="nextVideo" class="action-button secondary">
                                Skip â†’
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Completion State -->
            <div id="completionState" class="completion-state" style="display: none;">
                <h2>âš ï¸ Manual Submission Required</h2>
                <p>Auto-submission failed. Please copy the following code and send it to the researchers who asked you to survey:</p>
                <div class="results-code-container">
                    <textarea id="resultsCodeFinal" readonly class="results-code"></textarea>
                    <button id="copyResultsFinalBtn" class="copy-button">ğŸ“‹ Copy Code</button>
                </div>
                <p><small>Thank you for participating in our user study!</small></p>
            </div>
        </main>
    </div>

    <!-- Results Modal -->
    <div id="resultsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Your Study Results</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Please copy the following code and send it to the researchers who asked you to survey:</p>
                <div class="results-code-container">
                    <textarea id="resultsCode" readonly class="results-code"></textarea>
                    <button id="copyResultsBtn" class="copy-button">ğŸ“‹ Copy Code</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/study.js"></script>
</body>
</html>